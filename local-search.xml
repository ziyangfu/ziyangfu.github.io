<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linux网络延迟诊断工具</title>
    <link href="/2023/04/13/Linux%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/"/>
    <url>/2023/04/13/Linux%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h2 id="网络延迟工具"><a href="#网络延迟工具" class="headerlink" title="网络延迟工具"></a>网络延迟工具</h2><blockquote><p>整理目前通用的以太网延迟诊断工具，及简述实现原理。</p></blockquote><h3 id="1-ping"><a href="#1-ping" class="headerlink" title="1. ping"></a>1. ping</h3><p>最常用的网络工具之一，用于测试主机与目标主机之间的网络连接是否正常，以及网络延迟。</p><p>测量原理：发送ICMP报文来测试网络连接与延迟，并能够显示每个ICMP报文的往返时间（RTT）</p><ol><li>客户端发送一个ICMP Echo Request消息到目标主机。</li><li>目标主机收到ICMP Echo Request消息后，返回一个ICMP Echo Reply消息。</li><li>客户端收到ICMP Echo Reply消息后，计算出往返时间（RTT），并显示出来</li></ol><p>优势：简单易用，通用性强</p><p>局限性：</p><ol><li>只能获得RTT时间，粒度较粗</li><li>延迟时间为测试主机IP层到目标主机IP层时间（ICMP – ICMP）</li><li>可以很好的测试物理网络连通性与网络状态，但不能跟踪实际数据包的时间延迟，也无法获取TCP层、应用层乃至应用的时延。</li></ol><blockquote><ol><li>局域网的连通性测试工具还有 arping，其原理是通过发送ARP请求来获得目标设备的MAC地址，并测试网络的连通性</li><li>追踪网络数据包的路由路径可以使用 traceroute</li></ol></blockquote><h3 id="2-wireshark"><a href="#2-wireshark" class="headerlink" title="2. wireshark"></a>2. wireshark</h3><p>侧重于流量分析</p><h3 id="3-iperf"><a href="#3-iperf" class="headerlink" title="3. iperf"></a>3. <a href="https://linux.die.net/man/1/iperf">iperf</a></h3><blockquote><p><a href="https://blog.51cto.com/u_15127599/4202824">iperf网络性能测试工具</a></p></blockquote><p>iperf是一个网络性能测试工具。Iperf可以测试TCP和UDP带宽质量。iperf可以测量最大TCP带宽，具有多种参数和UDP特性。 iperf可以报告带宽，延迟抖动和数据包丢失。</p><p>抖动和丢包率适应于UDP测试，带宽测试适用与TCP与UDP。</p><p>需要服务端与客户端同时开启 iperf 程序。</p><img src="/2023/04/13/Linux%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/image-20230329104110311.png" class="" title="image1"><p>​带宽测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># UDP测试 带宽  Jitter抖动  丢包率</span><br>[ 3] <span class="hljs-built_in">local</span> 192.168.1.1 port 2152 connected with 192.168.101.2 port 56768<br>[ ID] Interval      Transfer    Bandwidth       Jitter  Lost/Total Datagrams<br>[ 3] 0.0- 1.0 sec 1.40 MBytes 11.7 Mbits/sec  0.069 ms   0/14671 (0%)<br>[ 3] 1.0- 2.0 sec 1.40 MBytes 11.8 Mbits/sec  0.050 ms   0/14703 (0%)<br>[ 3] 2.0- 3.0 sec 1.40 MBytes 11.8 Mbits/sec  0.052 ms   0/14708 (0%)<br>[ 3] 3.0- 4.0 sec 1.40 MBytes 11.8 Mbits/sec  0.057 ms   0/14704 (0%)<br>[ 3] 4.0- 5.0 sec 1.40 MBytes 11.8 Mbits/sec  0.072 ms   0/14706 (0%)<br>[ 3] 5.0- 6.0 sec 1.40 MBytes 11.8 Mbits/sec  0.075 ms   0/14705 (0%)<br>[ 3] 6.0- 7.0 sec 1.40 MBytes 11.8 Mbits/sec  0.060 ms   0/14707 (0%)<br>[ 3] 7.0- 8.0 sec 1.40 MBytes 11.8 Mbits/sec  0.073 ms   0/14703 (0%)<br>[ 3] 8.0- 9.0 sec 1.40 MBytes 11.8 Mbits/sec  0.073 ms   0/14706 (0%)<br>[ 3] 0.0-10.0 sec 14.0 MBytes 11.8 Mbits/sec  0.064 ms   0/147020 (0%)<br></code></pre></td></tr></table></figure><h3 id="4-netperf"><a href="#4-netperf" class="headerlink" title="4. netperf"></a>4. <a href="https://github.com/HewlettPackard/netperf">netperf</a></h3><p>Netperf 是一个基准，可用于衡量许多不同类型网络的性能。它为单向吞吐量和端到端延迟提供测试。</p><p>原理：TCP_RR（TCP Request-Response）测试模式来测量端到端的时间延迟</p><p>需要服务端与客户端同时开启 iperf 程序。</p><h3 id="5-qperf"><a href="#5-qperf" class="headerlink" title="5. qperf"></a>5. <a href="https://github.com/linux-rdma/qperf">qperf</a></h3><blockquote><p><a href="https://blog.csdn.net/notbaron/article/details/75949630">网络性能测试工具qperf使用</a></p></blockquote><p>测量网络带宽与时延，亮点在于可以测 RDMA。</p><p>需要服务端与客户端同时开启 qperf 程序。</p><p>原理：pingpong测试</p><p>tcp_lat：TCP单向延迟</p><img src="/2023/04/13/Linux%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/image-20230329131135507.png" class="" title="image2"><p>​获取网络的带宽和延时性能曲线（消息大小 1byte -&gt; 64K， 每次翻倍，循环获取延迟与带宽）</p><h3 id="6-nmap"><a href="#6-nmap" class="headerlink" title="6. nmap"></a>6. <a href="https://github.com/nmap/nmap">nmap</a></h3><p>四层主机发现工具</p><p>Nmap是一款广泛使用的网络扫描和安全评估工具，它可以帮助用户识别和探测目标网络上的主机和服务，从而帮助用户评估网络的安全性。Nmap支持多种扫描技术，如TCP、UDP、ICMP等协议的扫描，可以通过不同的选项和参数来灵活地控制扫描的范围和方式。</p><h3 id="7-hping3"><a href="#7-hping3" class="headerlink" title="7. hping3"></a>7. <a href="https://wangchujiang.com/linux-command/c/hping3.html">hping3</a></h3><p>四层主机发现工具</p><p>hping3是一款基于TCP&#x2F;IP协议栈的网络安全工具，可以对TCP、UDP、ICMP等协议进行探测和攻击。</p><p>其原理是构造控制报文，向目标主机发送探测包，根据目标主机返回的响应信息进行分析和判断。hping3可以自定义TCP、UDP、ICMP等协议的报文头和数据，以实现不同的攻击和探测。</p><h3 id="8-应用层RTT测量"><a href="#8-应用层RTT测量" class="headerlink" title="8. 应用层RTT测量"></a>8. 应用层RTT测量</h3><p>如http的RTT测量等</p><p>商业工具</p><h3 id="9-albedo-xGenius以太网测试仪"><a href="#9-albedo-xGenius以太网测试仪" class="headerlink" title="9. albedo xGenius以太网测试仪"></a>9. albedo xGenius以太网测试仪</h3><p><a href="https://www.coolshark.com/products/albedo.html">https://www.coolshark.com/products/albedo.html</a></p><img src="/2023/04/13/Linux%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7/image-20230328100238890.png" class="" title="image3"><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以太网延迟测量主要分为2种方式，分别为RTDP与OWDP。</p><ul><li>RTDP网络测试方式应用最为广泛，其原理是RTT往返时间测量，网络上存在大量的类似工具。另外通过RTT也可以简单估计单向延迟。</li><li>OWDP（One way delay and package loss protocol）是一种单向延迟测量方法，由于其局限性较高，因此网络上的可用工具非常少。</li></ul><p>OWDP缺点：</p><ol><li>需要精确时钟同步，测量精度与时钟同步精度有关。</li><li>需要多终端同时安装与运行程序，高复杂网络下实现代价太高。</li></ol><p>OWDP优点：</p><ol><li>测量精度高，适用于进行精度要求很高的实时性检测。</li></ol><p>车载以太网自身的特点：</p><p>针对缺点1：TSN时间敏感网络实际解决了时钟同步问题（精度250 us）</p><p>针对缺点2：车载以太网趋近于一个简单静态网络，网络拓扑简单。</p><p>针对优点1：车载网络针对实时性，具有很高的要求。</p>]]></content>
    
    
    
    <tags>
      
      <tag>原创</tag>
      
      <tag>网络</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/04/12/hello-world/"/>
    <url>/2023/04/12/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
